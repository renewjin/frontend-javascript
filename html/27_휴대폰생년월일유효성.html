<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <title>회원가입</title>
        <style>
            
        </style>
        <link rel="stylesheet" href="../css/27_이름유효성검사.css">
    </head>
    <body>
        <h2>회원가입</h2>
        <form action="#" name="signupForm">
            <h3>휴대폰</h3>
            <input type="text" class="signup-input" id="inputPhone" name="user_phone">
            <br>
            <span class="input-result">휴대폰 000-0000-0000</span>
            <br>
            <br>
            <h3>생년월일</h3>
            <input type="text" class="signup-input" id="inputBirth" name="user_birth">
            <br>
            <span class="input-result">생년월일 yyyy-mm-dd</span>
        </form>
        <script>
            /*
            inputPhone
            휴대폰번호
            const phoneRegex = /^\d{3}-\d{3,4}-\d{4}$/; -> d : 숫자문자 (0-9)를 표현 중간에 - 추가
            const phoneRegex = /^\d{11}$/; -> 숫자만 11자리 01012345678 (-없이 입력) 

            inputYears
            생년월일
            const birthdateRegex = /^(19|20)\d{2}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9|3[0-1])$/;

            /^(19|20)\d{2}-(0[1-9]|1[0-2])-([0-2][1-9]|3[01])$/;
               (19|20)\d{2} -> 앞에두자리는 19, 20 으로 시작하는 부분 매칭 1900년대 2000년대, 그리고 뒤에는두자리는 알아서 작성
                /^(19|20)\d{6})$/;
                /^\d{8})$/;
                /^\d{6})$/;
            */


            /*
            유효성 여부를 체크해두는 객체 생성

            1. 체크할 리스트
            2. 체크할 태그 가져와 변수로 설정
            3. 해당변수 이벤트 
            */
            const checkList = {
                "inputPhone" : false,
                "inputBirth" : false
            }
            /*******핸드폰 번호 확인*******/
            const inputPhone = document.querySelector("#inputPhone");

            inputPhone.addEventListener("input", e=>{
                const value = e.target.value;
                const span = e.target.nextElementSibling.nextElementSibling;

                if(value.trim().length==0) {
                    span.textContent = "휴대폰 000-0000-0000"
                    span.classList.remove("check", "error");
                    value="";
                    checkList["inputPhone"]=false;
                }

                const 전화번호정규식 = /^\d{3}-\d{3,4}-\d{4}$/;

                if(전화번호정규식.test(value)) {
                    span.textContent = "유효한 휴대폰번호 형식입니다";
                    span.classList.add("check");
                    span.classList.remove("error");
                    checkList["inputPhone"] = true;
                } else {
                    span.textContent = "유효하지 않는 휴대폰번호 형식입니다";
                    span.classList.add("error");
                    span.classList.remove("check");
                    checkList["inputPhone"] = false;
                }
            })


            /*******생년월일 확인*******/
            const inputBirth = document.querySelector("#inputBirth");

            inputBirth.addEventListener("input", e=>{
                const value = e.target.value;
                const span = e.target.nextElementSibling.nextElementSibling;

                if(value.trim().length==0) {
                    span.textContent = "생년월일 yyyy-mm-dd"
                    span.classList.remove("check", "error");
                    value="";
                    checkList["inputBirth"]=false;
                }

                const 생년월일정규식 = /^(19|20)\d{2}-(0[1-9]|1[0-2])-([0-2][1-9]|3[01])$/;

                if(생년월일정규식.test(value)) {
                    span.textContent = "유효한 생년월일 형식입니다";
                    span.classList.add("check");
                    span.classList.remove("error");
                    checkList["inputBirth"] = true;
                } else {
                    span.textContent = "유효하지 않는 생년월일 형식입니다";
                    span.classList.add("error");
                    span.classList.remove("check");
                    checkList["inputBirth"] = false;
                }
            })
        </script>


    </body>
    
</html>
